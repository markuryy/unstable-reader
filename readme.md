# Unstable Reader

Unstable Reader is a Python package that allows you to extract metadata from images generated by various stable diffusion tools. It provides a simple and intuitive API for accessing the extracted metadata, making it easy to integrate into your own applications.

## Features

- Extract metadata from images generated by popular stable diffusion tools, including:
  - Stable Diffusion webUI (Automatic1111)
  - ComfyUI
  - Easy Diffusion
  - InvokeAI
  - NovelAI
  - Draw Things
  - Stable SwarmUI
  - Fooocus
- Access extracted metadata through convenient properties, such as prompt, negative prompt, tool, seed, width, height, workflow, and parameters
- Supports various image formats, including PNG, JPEG, and WebP
- Easy installation via pip
- Lightweight and dependency-free (only requires `piexif` and `Pillow`)
- Open-source and actively maintained

## Installation

You can install the Unstable Reader package using pip:

```
pip install unstable-reader
```

## Usage

To use the Unstable Reader package in your Python program, follow these steps:

1. Import the `ImageMetadataExtractor` class from the `unstable_reader.extractor` module:

```python
from unstable_reader.extractor import ImageMetadataExtractor
```

2. Create an instance of the `ImageMetadataExtractor` class by providing the path to the image file:

```python
image_path = "path/to/your/image.png"
extractor = ImageMetadataExtractor(image_path)
```

3. Call the `extract_metadata()` method to extract the metadata from the image:

```python
extractor.extract_metadata()
```

4. Access the extracted metadata using the following properties:

```python
raw_metadata = extractor.raw
prompt = extractor.prompt
negative_prompt = extractor.negative
tool = extractor.tool
seed = extractor.seed
width = extractor.width
height = extractor.height
workflow = extractor.workflow
parameters = extractor.parameters
```

## Example

Here's a complete example that demonstrates how to use the Unstable Reader package to extract metadata from an image:

```python
from unstable_reader.extractor import ImageMetadataExtractor

# Specify the path to your image file
image_path = "path/to/your/image.png"

# Create an instance of the ImageMetadataExtractor
extractor = ImageMetadataExtractor(image_path)

# Extract the metadata from the image
extractor.extract_metadata()

# Access the extracted metadata
raw_metadata = extractor.raw
prompt = extractor.prompt
negative_prompt = extractor.negative
tool = extractor.tool
seed = extractor.seed
width = extractor.width
height = extractor.height
workflow = extractor.workflow
parameters = extractor.parameters

# Print the extracted metadata
print("Raw Metadata:", raw_metadata)
print("Prompt:", prompt)
print("Negative Prompt:", negative_prompt)
print("Tool:", tool)
print("Seed:", seed)
print("Width:", width)
print("Height:", height)
print("Workflow:", workflow)
print("Parameters:", parameters)
```

## Supported Image Formats

The Unstable Reader package supports the following image formats:

- PNG
- JPEG
- WebP

## Dependencies

The Unstable Reader package has the following dependencies:

- `piexif`: A library for reading and writing EXIF metadata in image files
- `Pillow`: A library for opening, manipulating, and saving many different image file formats

These dependencies will be automatically installed when you install the Unstable Reader package using pip.

## Contributing

Contributions to the Unstable Reader package are welcome! If you encounter any issues, have suggestions for improvements, or would like to add support for additional stable diffusion tools, please open an issue or submit a pull request on the [GitHub repository](https://github.com/markuryy/unstable-reader).

## License

The Unstable Reader package is open-source and released under the [MIT License](https://opensource.org/licenses/MIT). You are free to use, modify, and distribute the package in accordance with the terms of the license.

## Credits

The Unstable Reader package would not be possible without code from **receyuki** (creator of **stable-diffusion-prompt-reader**). Special thanks to receyuki for their excellent work on parsing the metadata from various stable diffusion tools.

Credit also goes to Anthropic's Claude 3 Opus for assistance in developing and refining the package.

## Support and Feedback

If you have any questions, encounter issues, or have feedback regarding the Unstable Reader package, please don't hesitate to reach out. You can contact the maintainer of the package via email at help@markury.dev or open an issue on the [GitHub repository](https://github.com/markuryy/unstable-reader).

We appreciate your support and feedback in making Unstable Reader a valuable tool for the stable diffusion community!